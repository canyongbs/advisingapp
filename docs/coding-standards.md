# Coding Standards and Styles

## PHP CS Fixer (PHP Files)

This application comes with a PHP Coding Standards Fixer configuration [php-cs-fixer.php](../php-cs-fixer.php)

Within this configuration file is the agreed upon standards for the team.

When setting up the project you should set up your IDE to automatically apply these rules to the current file you are working in on save. Common IDE configurations on how to do that are listed below.

### IDE Configuration

#### VS Code

1. Install [PHP CS Fixer](https://marketplace.visualstudio.com/items?itemName=junstyle.php-cs-fixer) extension
2. Configure Extension, in `Settings as JSON`
    ```
    "php-cs-fixer.executablePath": "${workspaceFolder}/vendor/bin/php-cs-fixer",
    "php-cs-fixer.config": "php-cs-fixer.php",
    "php-cs-fixer.onsave": true,
    "php-cs-fixer.ignorePHPVersion": true,
    "editor.tabSize": 4,
    "[php]": {
        "editor.defaultFormatter": "junstyle.php-cs-fixer"
    },
    ```

---

## Prettier (CSS, JS, and \*.blade.php Files)

This application comes with [Prettier](https://www.npmjs.com/package/prettier) and the [Prettier Blade Plugin](https://www.npmjs.com/package/@shufo/prettier-plugin-blade) to be used in order to set and automatically apply code formatting rules to our code-base blade files.

Example of how to run the formatter manually:

```bash
spinc prettier-lint
```

When setting up the project you should set up your IDE to automatically apply these rules to the current file you are working in on save. Common IDE configurations on how to do that are listed below.

### IDE Configuration

#### PHPStorm / Jetbrains Products

You can use Prettier Plugin for JetBrains IDE.

Add extension setting `blade.php` to `File | Settings | Languages & Frameworks | JavaScript | Prettier | Run for files:`

e.g.

`{**/*,*}.{css,js,ts,jsx,tsx,blade.php}`

and turn on checkbox `On 'Reformat Code' action`

#### VSCode

You can use [Prettier extension for VSCode](https://github.com/prettier/prettier-vscode) to format blade within VSCode. You must install this plugin as local dependencies. see [https://github.com/prettier/prettier-vscode#prettier-resolution](https://github.com/prettier/prettier-vscode#prettier-resolution)

If you want to use formatter without Prettier, please consider using [vscode-blade-formatter](https://github.com/shufo/vscode-blade-formatter)

---

## LaraStan (PHP Files)

This application comes with a [LaraStan](https://github.com/nunomaduro/larastan) installed to provide static analysis (technically "code analysis" as it loads the Service Container) of the code-base.

Example of how to run the static analysis manually:

```bash
spinc larastan
```

Setup for automatic static analysis is per IDE and should be configured as such.

Configuration is set in the [phpstan.neon.dist](../phpstan.neon.dist) file. If additional local configuration is desired, you can create a `phpstan.neon` file in the root of the project and it will be loaded automatically.

Example `phpstan.neon` file:

```neon
includes:
    - phpstan.neon.dist

parameters:
    editorUrl: 'phpstorm://open?file=%%file%%&line=%%line%%'
```

---

## IDE Helper

This application comes with a [Laravel IDE Helper](https://github.com/barryvdh/laravel-ide-helper) installed to provide better auto-completion for Laravel Facades and other classes.

Helper and meta files can be generated by running the following commands, and should be run after any changes to the code-base that would affect the auto-completion.

```bash
spina ide-helper:generate
spina ide-helper:meta
```

Additionally, a helper file and related DocBlocks are generated to provide auto-completion and static analysis for Models and their relationships. This is done by running the following command, and should be run after any changes to Models.

```bash
spina ide-helper:models -M
```
