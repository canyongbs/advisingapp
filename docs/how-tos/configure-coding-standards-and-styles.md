# Configuring Coding Standards and Styles

## Code Styles

Code styling is enforced by a mixture of packages to provide style coverage in all coding languages within this project. (PHP, JS, YAML, etc.)

More detail on each package, extra configuration, setup in your IDE, etc. is below. But the following command can be run virtually at any time to run all styling processes:

```bash
composer format
```

---

### PHP CS Fixer (PHP Files)

This application comes with a PHP CS (Coding Standards ) Fixer configuration [php-cs-fixer.php](../php-cs-fixer.php)

Within this configuration file is the agreed upon standards for the team.

Though these will be automatically applied during CI of a Pull Request, when setting up the project you should set up your IDE to automatically apply these rules to the current file you are working in on save. Common IDE configurations on how to do that are listed below.

#### IDE Configuration

##### VS Code

1. Install [PHP CS Fixer](https://marketplace.visualstudio.com/items?itemName=junstyle.php-cs-fixer) extension
2. Configure Extension, in `Settings as JSON`
    ```
    "php-cs-fixer.executablePath": "${workspaceFolder}/vendor/bin/php-cs-fixer",
    "php-cs-fixer.config": "php-cs-fixer.php",
    "php-cs-fixer.onsave": true,
    "php-cs-fixer.ignorePHPVersion": true,
    "editor.tabSize": 4,
    "[php]": {
        "editor.defaultFormatter": "junstyle.php-cs-fixer"
    },
    ```

---

### Prettier (CSS, JS, Vue, and \*.blade.php Files)

This application comes with [Prettier](https://www.npmjs.com/package/prettier) and the [Prettier Blade Plugin](https://www.npmjs.com/package/@shufo/prettier-plugin-blade) to be used in order to set and automatically apply code formatting rules to our code-base blade files.

Example of how to run the formatter manually:

```bash
composer prettier-format
```

Though these will be automatically applied during CI of a Pull Request, when setting up the project you should set up your IDE to automatically apply these rules to the current file you are working in on save. Common IDE configurations on how to do that are listed below.

#### IDE Configuration

##### VSCode

You can use [Prettier extension for VSCode](https://github.com/prettier/prettier-vscode) to format blade within VSCode. You must install this plugin as local dependencies. see [https://github.com/prettier/prettier-vscode#prettier-resolution](https://github.com/prettier/prettier-vscode#prettier-resolution)

---

---

## Static Analysis

### PHPStan / LaraStan (PHP Files)

This application comes with [PHPStan](https://phpstan.org/) and [LaraStan](https://github.com/nunomaduro/larastan) installed to provide static analysis (technically "code analysis" as it loads the Service Container) of the code-base.

Example of how to run the static analysis manually:

```bash
composer lint
```

#### IDE Configuration

##### VSCode

1. Install the VSCode Extension: https://marketplace.visualstudio.com/items?itemName=SanderRonde.phpstan-vscode
2. Configure Extension, in `Settings as JSON`
    ```
    "phpstan.singleFileMode": false,
    "phpstan.binPath": "./vendor/bin/phpstan",
    "phpstan.binCommand": [],
    "phpstan.configFile": "phpstan.neon.dist",
    "phpstan.dockerContainerName": "advisingapp-app-1",
    "phpstan.rootDir": "",
    "phpstan.options": [],
    "phpstan.enableStatusBar": true,
    "phpstan.memoryLimit": "1G",
    "phpstan.enabled": true,
    "phpstan.projectTimeout": 300000,
    "phpstan.timeout": 300000,
    "phpstan.suppressTimeoutMessage": false,
    "phpstan.showProgress": false,
    "phpstan.showTypeOnHover": false,
    "phpstan.ignoreErrors": [],
    "phpstan.suppressWorkspaceMessage": false,
    "phpstan.pro": false,
    "phpstan.tmpDir": "",
    "phpstan.checkValidity": false,
    "phpstan.paths": {
        "": "/var/www/html"
    },
    ```

---

### Laravel IDE Helper

This application comes with [Laravel IDE Helper](https://github.com/barryvdh/laravel-ide-helper) installed to provide better auto-completion for Laravel Facades and other classes to help static analysis like PHPStan.

Helper and meta files can be generated by running the following command, and should be run after any changes to the code-base that would affect the auto-completion or any changes to Models.

```bash
composer generate-helper-files
```
